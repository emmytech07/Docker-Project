name: Cypress Docker CI
on: [push]

jobs:
  cypress-run:
    runs-on: ubuntu-latest
    steps:
      # Step 1: MUST check out the code so the runner sees your Dockerfile
      - name: Checkout code
        uses: actions/checkout@v4

      # Step 2: Build the image from your local Dockerfile
      - name: Build Cypress Image
        run: docker build -t my-cypress-app .

      # Step 3: Run the tests inside that built image
      - name: Run Cypress Tests
        run: |
          docker run --rm \
          -v ${{ github.workspace }}:/e2e \
          -w /e2e \
          my-cypress-app
